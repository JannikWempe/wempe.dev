---
import DefaultLayout from '~/layouts/DefaultLayout.astro';
import Button from '~/components/ui/Button.astro';
import Link from '~/components/ui/Link.astro';
import { Image } from 'astro:assets';
import Endorsements from '~/components/Endorsements.astro';
import Appearences from '~/components/Appearences.astro';
import Projects from '~/components/Projects.astro';
import { Icon } from 'astro-icon/components';

import jannikWempeImg from '~/assets/images/jannik-wempe.png';
import volkerKlattImg from '~/assets/images/endorsements/volker-klatt.png';
import sandeepPandaImg from '~/assets/images/endorsements/sandeep-panda.jpg';
import { getCollection } from 'astro:content';
import { newestFirst } from '~/lib/blog';
import BlogPostCard from '~/components/BlogPostCard.astro';
import { EMAIL, LINKEDIN_URL } from '~/constants/socials';
// prerender the page and have dynamic content as server islands
export const prerender = true;

const endorsements = [
	{
		text: "We have been working with Jannik Wempe in the area of our website programming for many years. He has extensive expertise in this field and is always very solution-oriented. He always keeps his appointment commitments, and he responds very quickly to spontaneous inquiries and change requests. I enjoy working with Jannik - it's fun, and the result of his work exceeds our expectations.",
		author: {
			name: 'Volker Klatt',
			social: 'https://www.linkedin.com/in/volkerklatt/',
		},
		role: {
			text: 'Managing Director',
			companyName: 'easy data solution GmbH',
			companyUrl: 'https://www.easydatasolution.de',
		},
		relation: 'client',
		imageUrl: volkerKlattImg,
	},
	{
		text: 'Jannik is one of the smartest engineers I’ve worked with. He deeply understands problems, asks the right questions, and delivers high quality solutions quickly — exactly what a fast-moving startup needs. He’s an invaluable asset to any team.',
		author: {
			name: 'Sandeep Panda',
			social: 'https://x.com/Sandeepg33k',
		},
		role: {
			text: 'Co-founder & CTO',
			companyName: 'Hashnode',
			companyUrl: 'https://hashnode.com',
		},
		relation: 'boss at Hashnode',
		imageUrl: sandeepPandaImg,
	},
] as const;

const latestBlogPosts = (await getCollection('blog')).sort(newestFirst).slice(0, 4);
---

<DefaultLayout
	metadata={{
		title: 'Jannik Wempe | Passionate Software Engineer',
		description:
			'Full-stack software engineer crafting high-impact web solutions. From frontend development to serverless architectures, I build scalable applications that solve real business challenges.',
	}}
>
	<main>
		<section class="relative flex justify-between">
			{/* Background with gradient and pattern */}
			<div class="absolute inset-0 -z-10 bg-linear-to-br from-blue-100 via-white to-indigo-100">
				<div
					class="absolute inset-0"
					style={{
						backgroundImage: `radial-gradient(circle at 1px 1px, rgb(203 213 225 / 0.5) 1px, transparent 0)`,
						backgroundSize: '24px 24px',
					}}
				>
				</div>
			</div>

			<div class="relative container mx-auto overflow-hidden pt-16 pb-28">
				<div class="flex flex-col justify-between gap-12 lg:flex-row">
					<div class="mt-8">
						<p class="text-md font-bold tracking-wide text-blue-600 uppercase">Engineering Value Beyond Code</p>
						<h2 class="mt-1 max-w-lg text-5xl font-bold text-indigo-900">Crafting Full-Stack Solutions That Matter</h2>
						<p class="mt-4 max-w-xl text-lg leading-relaxed font-semibold text-slate-700">
							Drawing from experience across modern web technologies, cloud platforms, and system architecture, I build
							end-to-end solutions that create lasting value. My passion for learning and natural curiosity drive me to
							stay at the forefront of technological innovation.
						</p>
						<Button
							as="a"
							href={`mailto:${EMAIL}`}
							color="primary"
							variant="solid"
							size="lg"
							class="plausible-event-name=contact+email plausible-event-name=contact group mt-8"
						>
							Reach out
							<Icon
								name="lucide:mail"
								slot="icon-right"
								class="transition-transform group-hover:scale-125 group-hover:rotate-12"
							/>
						</Button>
					</div>

					<div
						class="relative mt-8 aspect-square w-[392px] max-w-full before:absolute before:inset-0 before:top-0 before:left-0 before:-z-10 before:block before:aspect-square before:w-full before:rounded-full before:bg-indigo-900 before:content-['']"
					>
						<div
							class="aspect-square w-[380px] max-w-[98%] overflow-hidden rounded-full ring-4 shadow-lg ring-slate-100"
						>
							<Image src={jannikWempeImg} alt="Portrait of Jannik Wempe" width={380} height={380} loading={'eager'} />
						</div>
						<h1 aria-label="Jannik Wempe" class="absolute right-[-25px] bottom-[-35px]">
							<svg
								viewBox="0 0 320 320"
								xmlns="http://www.w3.org/2000/svg"
								class="aspect-square w-[438px] max-w-[calc(100vw+25px)] text-xl font-bold text-indigo-800 sm:text-2xl"
							>
								<path id="bottom-curve" d="M 0 160 C 0 373, 320 373, 320 160" stroke="transparent" fill="transparent"
								></path>

								<text aria-hidden="true" textLength="320" fill="currentColor" text-anchor="middle">
									<textPath xlink:href="#bottom-curve" text-anchor="middle" startOffset="50%">Me, Jannik Wempe</textPath
									>
								</text>
							</svg>
						</h1>
					</div>
				</div>
			</div>
		</section>

		<section class="container mx-auto py-16">
			<p class="text-center text-sm font-bold tracking-wide text-blue-600 uppercase">Don't take my word for it</p>
			<h2 class="text-center text-3xl font-bold text-indigo-900">What Others Say About Me</h2>
			<Endorsements {endorsements} class="mt-8" />
		</section>

		<section class="container mx-auto py-16">
			<p class="text-center text-sm font-bold tracking-wide text-blue-600 uppercase">What I've built</p>
			<h2 class="text-center text-3xl font-bold text-indigo-900">Projects</h2>
			<p class="mx-auto mt-2 max-w-[80ch] text-center text-lg leading-relaxed text-pretty text-slate-700">
				Below are some of the projects that I've worked on. They only include projects that I've done in addition to my
				day job and with the intent of doing earning money – not for fun or to learn something new.
			</p>
			<Projects class="mt-8" />
		</section>

		<section class="container mx-auto flex flex-col items-center py-16">
			<p class="text-center text-sm font-bold tracking-wide text-blue-600 uppercase">CV</p>
			<h2 class="text-center text-3xl font-bold text-indigo-900">Work Experience</h2>
			<div class="mx-auto mt-8 rounded-lg bg-indigo-50 px-10 py-6 shadow-lg shadow-indigo-100">
				<p class="mx-auto max-w-[80ch] text-center text-4xl leading-relaxed font-black text-pretty text-slate-700">
					DRY
				</p>
				<p class="mx-auto mt-1 max-w-[80ch] text-center text-lg leading-relaxed text-pretty text-slate-700">
					"Don't repeat yourself" – go and look it up on my <Link
						href={LINKEDIN_URL}
						target="_blank"
						class="plausible-event-name=contact+linkedin plausible-event-name=contact">LinkedIn profile</Link
					> or <Link href={`mailto:${EMAIL}`} target="_blank">reach out to me</Link>.
				</p>
			</div>
		</section>

		<section class="container mx-auto flex flex-col items-center py-16">
			<p class="text-sm font-bold tracking-wide text-blue-600 uppercase">Things I write about</p>
			<h2 class="text-center text-3xl font-bold text-indigo-900">Latest Blog Posts</h2>

			<div class="mt-8 grid grid-cols-1 gap-16 md:grid-cols-2">
				{latestBlogPosts.map((post) => <BlogPostCard post={post} />)}
			</div>
			<!-- TODO: add signup to blog newsletter here? -->
			<Button as="a" color="primary" variant="solid" size="lg" href="/blog" class="group mx-auto mt-8">
				See all posts
			</Button>
		</section>

		<section class="container mx-auto flex flex-col items-center py-16">
			<p class="text-sm font-bold tracking-wide text-blue-600 uppercase">Speaking & Appearances</p>
			<h2 class="text-center text-3xl font-bold text-indigo-900">Tech Talks and Podcast Conversations</h2>
			<Appearences class="mt-8" />
		</section>
	</main>
</DefaultLayout>
