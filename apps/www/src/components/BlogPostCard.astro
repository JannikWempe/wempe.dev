---
import type { HTMLAttributes } from 'astro/types';
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import { twMerge } from 'tailwind-merge';
import { formatDate } from '~/utils/time';

interface Props extends HTMLAttributes<'article'> {
	post: CollectionEntry<'blog'>;
}

const { post, class: classes, ...rest } = Astro.props;
const { title, excerpt, datePublished, cover } = post.data;

const formattedDate = formatDate(datePublished);
---

<article class={twMerge('relative', classes)} {...rest}>
	<div class="relative aspect-[1600/840] w-full">
		<Image src={cover} alt={title} width={1600} height={840} class="rounded-xl object-cover" />
	</div>
	<div class="mt-4">
		<h2 class="text-2xl font-bold text-slate-900">{title}</h2>
		<time datetime={formattedDate} class="mt-1 block text-sm font-semibold text-slate-600">
			{formattedDate}
		</time>
		<p class="mt-2 line-clamp-2 text-slate-700">{excerpt}</p>
	</div>
	<a href={`/blog/${post.data.slug}`} class="absolute inset-0">
		<span class="sr-only">Read more about {title}</span>
	</a>
</article>
