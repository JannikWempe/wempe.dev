---
import { twMerge } from 'tailwind-merge';

import { getBlogPosts } from '~/lib/blog';

interface Props {
	limit?: number;
	class?: string;
}

const { limit = 2, class: className } = Astro.props;

const posts = await getBlogPosts(limit);

Astro.response.headers.set('Cache-Control', 'max-age=3600, stale-while-revalidate=600, stale-if-error=86400');
Astro.response.headers.set('Cache-Tag', 'blog-posts');
---

<div class={twMerge('grid grid-cols-1 gap-8 md:grid-cols-2', className)}>
	{
		posts.map((post) => (
			<div class="rounded-lg bg-white p-8 shadow-md shadow-indigo-50 transition-shadow duration-300 hover:shadow-lg hover:shadow-indigo-100">
				{post.title}
			</div>
		))
	}
</div>
