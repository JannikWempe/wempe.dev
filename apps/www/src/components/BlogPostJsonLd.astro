---
import { getImage } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';

interface Props {
	post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;

const optimizedImage = await getImage({ src: post.data.cover });
let imageURL = optimizedImage.src;

let schema = JSON.stringify({
	'@context': 'https://schema.org/',
	'@type': 'BlogPosting',
	headline: post.data.title,
	author: {
		'@type': 'Person',
		name: 'Jannik Wempe',
	},
	datePublished: post.data.datePublished,
	dateCreated: post.data.datePublished,
	description: post.data.excerpt,
	url: new URL(`/blog/${post.id}`, Astro.site),
	'inLanguage ': 'en-US',
	image: imageURL,
	// "keywords": tags,
});
---

...

<script type="application/ld+json" set:html={schema} />
