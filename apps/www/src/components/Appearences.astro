---
import { Icon } from 'astro-icon/components';
import { twMerge } from 'tailwind-merge';
import { Image } from 'astro:assets';
import { formatDate } from '~/utils/time';
import Badge from './ui/Badge.astro';

import hashnodeCommitImg from '~/assets/images/talks/hashnode-podcast.jpg';
import mongodbPodcastImg from '~/assets/images/talks/mongodb-podcast.png';
import cdkDayTalkImg from '~/assets/images/talks/cdk-day-2022.png';

interface Props {
	class?: string;
}

const { class: classes } = Astro.props;

const appearances = [
	{
		title: 'Building Hashnode’s Public APIs with Sandro, Jannik, and Sandeep',
		host: 'The Commit Podcast – Hashnode',
		type: 'podcast',
		date: '2023-11-29',
		coverImageUrl: hashnodeCommitImg,
		link: 'https://www.youtube.com/watch?v=5nL-C0JNKwE',
	},
	{
		title: 'Hashnode and MongoDB with Jannik Wempe',
		host: 'The MongoDB Podcast',
		type: 'podcast',
		date: '2022-11-22',
		coverImageUrl: mongodbPodcastImg,
		link: 'https://open.spotify.com/episode/2X6hD02EE8UmjksJpoemTb?si=b28b4c0e65ea4480',
	},
	{
		title: 'Testing in Serverless Architectures Using the CDK Provider Framework',
		host: 'CDK Day',
		type: 'conference',
		date: '2022-05-26',
		coverImageUrl: cdkDayTalkImg,
		link: 'https://www.youtube.com/live/s8tO-ymVQPg?si=7GuZlOGtZw9OT8g5&t=7749',
	},
] as const;
---

<ul class={twMerge('columns-1 gap-8 lg:columns-2 xl:columns-3', classes)}>
	{
		appearances.map((a) => (
			<li class="group relative overflow-hidden rounded-2xl border border-slate-200/60 bg-white shadow-sm transition-all duration-300 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:border-indigo-200 hover:shadow-lg hover:shadow-indigo-100/50">
				<div class="overflow-hidden">
					<Image
						src={a.coverImageUrl}
						alt={''}
						format="avif"
						class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
					/>
				</div>
				<div class="p-5">
					<h3 class="line-clamp-2 text-lg font-semibold text-slate-900 transition-colors group-hover:text-indigo-600">
						{a.title}
					</h3>
					<div class="mt-4 flex items-center justify-between">
						<div class="flex items-center gap-2 text-sm text-slate-500">
							<Icon name="lucide:calendar" class="h-4 w-4" />
							<time>{formatDate(a.date)}</time>
						</div>

						{a.type === 'podcast' ? (
							<Badge variant="purple">
								<Icon name="lucide:mic" slot="icon-left" class="h-3 w-3" />
								Podcast
							</Badge>
						) : (
							<Badge variant="blue">
								<Icon name="lucide:presentation" slot="icon-left" class="h-3 w-3" />
								Conference
							</Badge>
						)}
					</div>
				</div>
				<a href={a.link} class="absolute inset-0 focus:outline-none">
					<span class="sr-only">Watch or listen to {a.title}</span>
				</a>
			</li>
		))
	}
</ul>
